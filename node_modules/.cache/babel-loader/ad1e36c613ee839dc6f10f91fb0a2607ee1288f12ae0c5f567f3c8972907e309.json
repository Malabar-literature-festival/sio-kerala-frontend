{"ast":null,"code":"var _jsxFileName = \"/Users/azharpallikkandy/Documents/projects/DataHex/dfms/dfms-admin/src/components/private/pages/team/index.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport Layout from \"../../common/layout\";\nimport { useTranslation } from \"react-i18next\";\nimport ListTable from \"../../../elements/list/list\";\nimport { Container } from \"../../common/layout/styels\";\nimport AttendanceDetails from \"./attendance\";\nimport AutoForm from \"../../../elements/form\";\nimport { postData } from \"../../../../backend/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Team = props => {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const [attributes] = useState([{\n    type: \"text\",\n    placeholder: \"fullName\",\n    name: \"fullName\",\n    validation: \"\",\n    default: \"\",\n    label: \"fullName\",\n    required: true,\n    view: true,\n    add: true,\n    update: true\n  }, {\n    type: \"select\",\n    placeholder: \"place\",\n    name: \"place\",\n    validation: \"\",\n    default: \"\",\n    label: \"place\",\n    required: true,\n    view: true,\n    add: true,\n    update: true,\n    apiType: \"API\",\n    selectApi: \"place/select\"\n  }, {\n    type: \"select\",\n    placeholder: \"shift\",\n    name: \"shift\",\n    validation: \"\",\n    default: \"\",\n    label: \"shift\",\n    required: true,\n    view: true,\n    add: true,\n    update: true,\n    apiType: \"API\",\n    selectApi: \"shift/select\"\n  }]);\n  const [note] = useState([{\n    type: \"text\",\n    placeholder: \"note\",\n    name: \"note\",\n    validation: \"\",\n    default: \"\",\n    label: \"note\",\n    required: true,\n    view: true,\n    add: true,\n    update: true\n  }]);\n  //to update the page title\n  useEffect(() => {\n    document.title = `${t(\"Team\")} - VSH Security`;\n  }, [t]);\n  const [action, setActions] = useState([]);\n  const [actionType, setActionType] = useState(\"attendance\");\n  const markAttendance = (item, data) => {\n    setActions({\n      item,\n      data\n    });\n    setActionType(\"attendance\");\n  };\n  const addNote = (item, data) => {\n    setActions({\n      item,\n      data\n    });\n    setActionType(\"note\");\n  };\n  const closeManage = () => {\n    setActions([]);\n  };\n  const [actions] = useState([{\n    element: \"toggle\",\n    type: \"callback\",\n    api: \"attendance\",\n    id: \"boardStatus\"\n  }, {\n    element: \"button\",\n    type: \"call\",\n    id: \"add-call\",\n    title: \"call\"\n  }, {\n    element: \"button\",\n    type: \"callback\",\n    id: \"add-note\",\n    title: \"note\",\n    callback: addNote\n  }, {\n    element: \"button\",\n    type: \"callback\",\n    id: \"attendance-today\",\n    title: \"attendanceToday\",\n    callback: markAttendance\n  }]);\n  const submitNote = async post => {\n    await postData(post, `attendance/${action.data._id}/add-note`).then(response => {\n      if (response.status === 200) {\n        props.setMessage({\n          type: 1,\n          content: `The '${t(\"note\")}' saved successfully!`,\n          proceed: t(\"okay\")\n        });\n        setActions([]);\n      } else {\n        props.setMessage({\n          type: 1,\n          content: \"Somethig went wrong\",\n          proceed: \"Try Again\"\n        });\n      }\n      props.setLoaderBox(false);\n    }).catch(error => {\n      props.setMessage({\n        type: 1,\n        content: \"An error occurred on the server. Please try again later or contact support if the issue persists.\",\n        proceed: \"Try Again\"\n      });\n      props.setLoaderBox(false);\n    });\n  };\n  // Use the useTranslation hook from react-i18next to handle translations\n  // const parkingDuration = totalDuration > 120 ? (days > 0 ? days + `d, ` : ``) + (hours > 0 ? hours + `h, ` : ``) + (minutes + t(\"m\")) : totalDuration.toFixed(0) + ` ` + t(\"minutes\");\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"noshadow\",\n    children: [/*#__PURE__*/_jsxDEV(ListTable, {\n      ...props,\n      actions: actions,\n      api: `place/team`,\n      itemTitle: `title`,\n      shortName: `attendance`,\n      addPrivilege: false,\n      delPrivilege: false,\n      updatePrivilege: false,\n      attributes: attributes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), action.data && actionType === \"attendance\" && /*#__PURE__*/_jsxDEV(AttendanceDetails, {\n      ...action,\n      onClose: closeManage,\n      setLoaderBox: props.setLoaderBox,\n      title: `Today's Attendance`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 54\n    }, this), action.data && actionType === \"note\" && /*#__PURE__*/_jsxDEV(AutoForm, {\n      useCaptcha: false,\n      useCheckbox: false,\n      description: \"\",\n      formType: \"post\",\n      header: t(\"addNewTitle\", {\n        label: \"note\"\n      }),\n      formInput: note,\n      submitHandler: submitNote,\n      button: t(\"submit\"),\n      isOpenHandler: closeManage,\n      isOpen: true,\n      plainForm: false\n    }, \"add-new-note\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 48\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n// exporting the page with parent container layout..\n_s(Team, \"PCE0po/I/K9ySIzyj4uPL/6Ccww=\", false, function () {\n  return [useTranslation];\n});\n_c = Team;\nexport default _c2 = Layout(Team);\nvar _c, _c2;\n$RefreshReg$(_c, \"Team\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useEffect","useState","Layout","useTranslation","ListTable","Container","AttendanceDetails","AutoForm","postData","Team","props","t","attributes","type","placeholder","name","validation","default","label","required","view","add","update","apiType","selectApi","note","document","title","action","setActions","actionType","setActionType","markAttendance","item","data","addNote","closeManage","actions","element","api","id","callback","submitNote","post","_id","then","response","status","setMessage","content","proceed","setLoaderBox","catch","error"],"sources":["/Users/azharpallikkandy/Documents/projects/DataHex/dfms/dfms-admin/src/components/private/pages/team/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Layout from \"../../common/layout\";\nimport { useTranslation } from \"react-i18next\";\nimport ListTable from \"../../../elements/list/list\";\nimport { Container } from \"../../common/layout/styels\";\nimport AttendanceDetails from \"./attendance\";\nimport AutoForm from \"../../../elements/form\";\nimport { postData } from \"../../../../backend/api\";\nconst Team = (props) => {\n  const { t } = useTranslation();\n  const [attributes] = useState([\n    {\n      type: \"text\",\n      placeholder: \"fullName\",\n      name: \"fullName\",\n      validation: \"\",\n      default: \"\",\n      label: \"fullName\",\n      required: true,\n      view: true,\n      add: true,\n      update: true,\n    },\n    {\n      type: \"select\",\n      placeholder: \"place\",\n      name: \"place\",\n      validation: \"\",\n      default: \"\",\n      label: \"place\",\n      required: true,\n      view: true,\n      add: true,\n      update: true,\n      apiType: \"API\",\n      selectApi: \"place/select\",\n    },\n    {\n      type: \"select\",\n      placeholder: \"shift\",\n      name: \"shift\",\n      validation: \"\",\n      default: \"\",\n      label: \"shift\",\n      required: true,\n      view: true,\n      add: true,\n      update: true,\n      apiType: \"API\",\n      selectApi: \"shift/select\",\n    },\n  ]);\n  const [note] = useState([\n    {\n      type: \"text\",\n      placeholder: \"note\",\n      name: \"note\",\n      validation: \"\",\n      default: \"\",\n      label: \"note\",\n      required: true,\n      view: true,\n      add: true,\n      update: true,\n    },\n  ]);\n  //to update the page title\n  useEffect(() => {\n    document.title = `${t(\"Team\")} - VSH Security`;\n  }, [t]);\n  const [action, setActions] = useState([]);\n  const [actionType, setActionType] = useState(\"attendance\");\n  const markAttendance = (item, data) => {\n    setActions({ item, data });\n    setActionType(\"attendance\");\n  };\n  const addNote = (item, data) => {\n    setActions({ item, data });\n    setActionType(\"note\");\n  };\n  const closeManage = () => {\n    setActions([]);\n  };\n\n  const [actions] = useState([\n    { element: \"toggle\", type: \"callback\", api: \"attendance\", id: \"boardStatus\" },\n    { element: \"button\", type: \"call\", id: \"add-call\", title: \"call\" },\n    { element: \"button\", type: \"callback\", id: \"add-note\", title: \"note\", callback: addNote },\n    { element: \"button\", type: \"callback\", id: \"attendance-today\", title: \"attendanceToday\", callback: markAttendance },\n  ]);\n  const submitNote = async (post) => {\n    await postData(post, `attendance/${action.data._id}/add-note`)\n      .then((response) => {\n        if (response.status === 200) {\n          props.setMessage({ type: 1, content: `The '${t(\"note\")}' saved successfully!`, proceed: t(\"okay\") });\n\n          setActions([]);\n        } else {\n          props.setMessage({ type: 1, content: \"Somethig went wrong\", proceed: \"Try Again\" });\n        }\n        props.setLoaderBox(false);\n      })\n      .catch((error) => {\n        props.setMessage({ type: 1, content: \"An error occurred on the server. Please try again later or contact support if the issue persists.\", proceed: \"Try Again\" });\n        props.setLoaderBox(false);\n      });\n  };\n  // Use the useTranslation hook from react-i18next to handle translations\n  // const parkingDuration = totalDuration > 120 ? (days > 0 ? days + `d, ` : ``) + (hours > 0 ? hours + `h, ` : ``) + (minutes + t(\"m\")) : totalDuration.toFixed(0) + ` ` + t(\"minutes\");\n  return (\n    <Container className=\"noshadow\">\n      <ListTable {...props} actions={actions} api={`place/team`} itemTitle={`title`} shortName={`attendance`} addPrivilege={false} delPrivilege={false} updatePrivilege={false} attributes={attributes}></ListTable>\n      {action.data && actionType === \"attendance\" && <AttendanceDetails {...action} onClose={closeManage} setLoaderBox={props.setLoaderBox} title={`Today's Attendance`}></AttendanceDetails>}\n      {action.data && actionType === \"note\" && <AutoForm useCaptcha={false} useCheckbox={false} description={\"\"} key={\"add-new-note\"} formType={\"post\"} header={t(\"addNewTitle\", { label: \"note\" })} formInput={note} submitHandler={submitNote} button={t(\"submit\")} isOpenHandler={closeManage} isOpen={true} plainForm={false}></AutoForm>}\n    </Container>\n  );\n};\n// exporting the page with parent container layout..\nexport default Layout(Team);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}